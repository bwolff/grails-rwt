<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>2 Getting Started 0.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/gettingStarted.html"><strong>2</strong><span>Getting Started</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/configuration.html"><strong>3</strong><span>Configuration</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/advancedTopics.html"><strong>4</strong><span>Advanced Topics</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p>This plugin integrates RWT - the web-ported Standard Widget Toolkit (SWT) - into your Grails
application. It enables you to build your RWT and JFace powered user interfaces using Groovy and the
complete Grails framework stack with all its powerful features and syntactic DSL sugar.
</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/introduction.html">&lt;&lt; <strong>1</strong><span>Introduction</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../guide/configuration.html"><strong>3</strong><span>Configuration</span> >></a></div>
                


                <div class="project">
                    <h1>2 Getting Started - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Benjamin Wolff</p>

                    <p><strong>Version:</strong> 0.1</p>

                    
                </div>

                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#installation"><strong>2.1</strong><span>Installation</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#createEntryPoint"><strong>2.2</strong><span>Creating the Entry Point Bean</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#configureEntryPoint"><strong>2.3</strong><span>Configuring the Entry Point</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#runApplication"><strong>2.4</strong><span>Running the Application</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#deployApplication"><strong>2.5</strong><span>Deploying the Application</span></a>
                    </div>
                    
                </div>
                

                

<h1 id="gettingStarted">2 Getting Started</h1>
This short guide will get you started with all you need to know to create your first Grails-RWT
application. You should be familiar with how to <a href="http://grails.org/doc/latest/guide/gettingStarted.html#creatingAnApplication" target="blank">create a Grails application</a>
and artifacts like <a href="http://grails.org/doc/latest/guide/GORM.html#quickStartGuide" target="blank">domain classes</a> and
<a href="http://grails.org/doc/latest/guide/services.html" target="blank">services</a>.<p class="paragraph"/>The RWT setup process is based on the <a href="http://eclipse.org/rap/developers-guide/devguide.php?topic=advanced/rwt-standalone.html" target="blank">standalone guide</a>.
However, the Grails-RWT plugin does most of the setup for you, as you will see in this guide.<p class="paragraph"/>Start with creating an example Grails application and then follow the instructions below. The next
sections assume that the applications is called <code>grails-rwt-example</code>. Replace the occurences in the example
URLs with the actual name of your example application.<p class="paragraph"/><h3>Example Code</h3><p class="paragraph"/>There is an example project <a href="http://github.com/bwolff/grails-rwt-example" target="blank">available on GitHub</a> that
can be used as a kickstart. It contains the example code shown in this guide and is properly
configured to get started immediately.<p class="paragraph"/><div class="code"><pre>git clone https://github.com/bwolff/grails&#45;rwt&#45;example</pre></div><p class="paragraph"/>After you checked out the project you can inspect the code and start the application as described
in the <a href="../guide/single.html#runApplication" class="guide">Running the Application</a> section below.



<h2 id="installation">2.1 Installation</h2>
The plugin is installed using the default <a href="http://grails.org/doc/latest/guide/conf.html#pluginDependencies" target="blank">Grails plugin installation mechanism</a>.
Simply add/modify the following lines to the plugin dependency section in the <code>grails-app/conf/BuildConfig.groovy</code> file:<p class="paragraph"/><div class="code"><pre>grails.project.dependency.resolution = &#123;<p class="paragraph"/>    plugins &#123;
        // Other plugin dependencies<p class="paragraph"/>        compile ':rwt:0.1'
    &#125;
&#125;</pre></div><p class="paragraph"/>The plugin will be installed automatically on the next invocation of a Grails command. Your IDE
(e.g. <a href="http://grails.org/products/ggts" target="blank">STS/GGTS</a>) should also pick up the new installed plugin and should make the contained jar
libraries available in your Grails project.


<h2 id="createEntryPoint">2.2 Creating the Entry Point Bean</h2>
The first step is to create a so called RWT  <em class="italic">entry point</em>  class. An instance of this class needs to
be registered as a Spring bean to be picked up by the RWT configuration. The
suggested approach is to use a Grails <a href="http://grails.org/doc/latest/guide/services.html" target="blank">service</a>
for that. Being a Grails artifact, a service is registered as a Spring bean by default
and other dependencies and functionalities are added/injected out of the box.<p class="paragraph"/>The following code snippet shows an example entry point service implementation
(in the <code>grails-app/services</code> sub-folder). To demonstrate the usage,
another service (<code>FooService</code>) and a domain class (<code>Foo</code>) are used. They don't do anything useful and
their code can be obtained from the example application, as described above. The comments in the code
snippet highlight interesting points.<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> grails.rwt.example<p class="paragraph"/><span class="java&#45;keyword">import</span> org.eclipse.jface.viewers.ArrayContentProvider
<span class="java&#45;keyword">import</span> org.eclipse.jface.viewers.LabelProvider
<span class="java&#45;keyword">import</span> org.eclipse.jface.viewers.ListViewer
<span class="java&#45;keyword">import</span> org.eclipse.rap.rwt.lifecycle.IEntryPoint
<span class="java&#45;keyword">import</span> org.eclipse.swt.SWT
<span class="java&#45;keyword">import</span> org.eclipse.swt.events.SelectionAdapter
<span class="java&#45;keyword">import</span> org.eclipse.swt.events.SelectionEvent
<span class="java&#45;keyword">import</span> org.eclipse.swt.layout.GridData
<span class="java&#45;keyword">import</span> org.eclipse.swt.layout.GridLayout
<span class="java&#45;keyword">import</span> org.eclipse.swt.widgets.Button
<span class="java&#45;keyword">import</span> org.eclipse.swt.widgets.Display
<span class="java&#45;keyword">import</span> org.eclipse.swt.widgets.Label
<span class="java&#45;keyword">import</span> org.eclipse.swt.widgets.List
<span class="java&#45;keyword">import</span> org.eclipse.swt.widgets.Shell<p class="paragraph"/>// <span class="java&#45;quote">"Note the use of Groovy syntax"</span><p class="paragraph"/>class HelloEntryPointService <span class="java&#45;keyword">implements</span> IEntryPoint &#123; // <span class="java&#45;quote">"The service needs to implement IEntryPoint"</span><p class="paragraph"/>    def fooService // <span class="java&#45;quote">"Other services will get injected by Grails"</span><p class="paragraph"/>    @Override
    <span class="java&#45;object">int</span> createUI() &#123;
        log.info(<span class="java&#45;quote">"Creating RWT UI ..."</span>) // <span class="java&#45;quote">"Implicit logger object"</span><p class="paragraph"/>        Display display = <span class="java&#45;keyword">new</span> Display()
        Shell shell = <span class="java&#45;keyword">new</span> Shell(display)
        shell.setSize(500, 400)
        shell.layout = <span class="java&#45;keyword">new</span> GridLayout()
        shell.setText(<span class="java&#45;quote">"Hello RWT!"</span>)<p class="paragraph"/>        <span class="java&#45;keyword">final</span> Label label = <span class="java&#45;keyword">new</span> Label(shell, SWT.NONE)
        label.layoutData = <span class="java&#45;keyword">new</span> GridData(SWT.FILL, SWT.CENTER, <span class="java&#45;keyword">true</span>, <span class="java&#45;keyword">false</span>)<p class="paragraph"/>        // <span class="java&#45;quote">"JFace is available"</span>
        ListViewer viewer = <span class="java&#45;keyword">new</span> ListViewer(shell, SWT.V_SCROLL | SWT.H_SCROLL)
        viewer.list.layoutData = <span class="java&#45;keyword">new</span> GridData(SWT.FILL, SWT.FILL, <span class="java&#45;keyword">true</span>, <span class="java&#45;keyword">true</span>)
        viewer.contentProvider = ArrayContentProvider.instance
        viewer.labelProvider = <span class="java&#45;keyword">new</span> LabelProvider()
        viewer.input = Foo.list() // <span class="java&#45;quote">"Use domain objects and GORM directly, no DTOs required!"</span><p class="paragraph"/>        Button button = <span class="java&#45;keyword">new</span> Button(shell, SWT.PUSH)
        button.layoutData = <span class="java&#45;keyword">new</span> GridData(SWT.BEGINNING, SWT.CENTER, <span class="java&#45;keyword">false</span>, <span class="java&#45;keyword">false</span>)
        button.text = <span class="java&#45;quote">"Click me!"</span>
        button.addSelectionListener(<span class="java&#45;keyword">new</span> SelectionAdapter() &#123;
            <span class="java&#45;object">Integer</span> num = 0<p class="paragraph"/>            @Override
            <span class="java&#45;keyword">public</span> void widgetSelected(SelectionEvent e) &#123;
                label.text = fooService.serviceMethod(num++) // <span class="java&#45;quote">"Call methods of other services"</span>
            &#125;
        &#125;)<p class="paragraph"/>        shell.open()
        <span class="java&#45;keyword">return</span> 0
    &#125;
&#125;</pre></div><p class="paragraph"/>According to the Grails conventions, a Spring bean called <code>helloEntryPointService</code> will be registered
automatically on application start. The next step is to configure our newly created entry point.<p class="paragraph"/><blockquote class="note">
The given code snippet is just a very simple example to demonstrate the usage. You should develop
your application using a cleaner separation of concerns, i.e. by employing the MVC or MVP pattern.
</blockquote>


<h2 id="configureEntryPoint">2.3 Configuring the Entry Point</h2>
The only thing that is missing now is the configuration of our new RWT entry point. This is done
in an own <a href="http://grails.org/doc/latest/guide/conf.html#config" target="blank">configuration</a> block in the
<code>grails-app/conf/Config.groovy</code> file.<p class="paragraph"/><div class="code"><pre>// RWT configuration
rwt &#123;<p class="paragraph"/>    // Entry points configuration
    entrypoints &#123;<p class="paragraph"/>        // Configuration of an entry point named 'hello', the relative URL path will be '/hello'.
        hello &#123;
            bean = 'helloEntryPointService' // The name of the entry point bean (required)
            pageTitle = 'Hello RWT!'        // The browser title that will be displayed (optional)
        &#125;
    &#125;
&#125;</pre></div><p class="paragraph"/>Here we simply specify our entry point as a block under <code>entrypoints</code> and provide the name of the
entry point bean, which is described above. We can also specify a string that will be displayed as
the browser's page title.<p class="paragraph"/>More information about the configuration of an RWT application and the entry points is available
<a href="../guide/single.html#configuration" class="guide">here</a>.



<h2 id="runApplication">2.4 Running the Application</h2>
The application can be started in a local development setup using the default
<a href="http://grails.org/doc/latest/ref/Command%20Line/run-app.html" target="blank">run-app</a> Grails command from the
command line in the project root folder:<p class="paragraph"/><div class="code"><pre>grails run&#45;app</pre></div><p class="paragraph"/>After the application has been started you should be able to access your first Grails-RWT example under the
following URL: <code>http://localhost:8080/grails-rwt-example/hello</code>


<h2 id="deployApplication">2.5 Deploying the Application</h2>
You can now package your application into a WAR file and deploy it to the <a href="http://grails.org/Deployment" target="blank">servlet container</a>
of your choice. The <a href="http://grails.org/doc/latest/guide/deployment.html" target="blank">deployment procedure</a> is the
same as for a default Grails application, by simply issuing the following command in the command
line:<p class="paragraph"/><div class="code"><pre>grails war</pre></div><p class="paragraph"/>The resulting WAR file is created in the <code>target/</code> sub-folder and can now be deployed to e.g. a
<a href="http://tomcat.apache.org/" target="blank">Tomcat</a> container. All necessary jar files for RWT/JFace will be
packaged and the web.xml will also be properly set up.<p class="paragraph"/>Congratulations! You should now be able to create a more sophisticated Grails-RWT applications and
explore the features that RWT provides.


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/introduction.html">&lt;&lt; <strong>1</strong><span>Introduction</span></a></div>
                
                    <div class="toc-item next-right"><a href="../guide/configuration.html"><strong>3</strong><span>Configuration</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
