<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>2.2 Creating the Entry Point Bean 1.0</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/gettingStarted.html"><strong>2</strong><span>Getting Started</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/configuration.html"><strong>3</strong><span>Configuration</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/advancedTopics.html"><strong>4</strong><span>Advanced Topics</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p>This plugin integrates RWT - the web-ported Standard Widget Toolkit (SWT) - into your Grails
application. It enables you to build your RWT and JFace powered user interfaces using Groovy and the
complete Grails framework stack with all its powerful features and syntactic DSL sugar.
</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/introduction.html">&lt;&lt; <strong>1</strong><span>Introduction</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/configuration.html"><strong>3</strong><span>Configuration</span> >></a></div>
                


                <div class="project">
                    <h1>2.2 Creating the Entry Point Bean - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Benjamin Wolff</p>

                    <p><strong>Version:</strong> 1.0</p>

                    
                </div>

                

                

<h2 id="createEntryPoint">2.2 Creating the Entry Point Bean</h2>
The first step is to create a so called RWT  <em class="italic">entry point</em>  class. An instance of this class needs to
be registered as a Spring bean to be picked up by the RWT configuration. The
suggested approach is to use a Grails <a href="http://grails.org/doc/latest/guide/services.html" target="blank">service</a>
for that. Being a Grails artifact, a service is registered as a Spring bean by default
and other dependencies and functionalities are added/injected out of the box.<p class="paragraph"/>The following code snippet shows an example entry point service implementation
(in the <code>grails-app/services</code> sub-folder). To demonstrate the usage,
another service (<code>FooService</code>) and a domain class (<code>Foo</code>) are used. They don't do anything useful and
their code can be obtained from the example application, as described above. The comments in the code
snippet highlight interesting points.<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> grails.rwt.example<p class="paragraph"/><span class="java&#45;keyword">import</span> org.eclipse.jface.layout.GridDataFactory
<span class="java&#45;keyword">import</span> org.eclipse.jface.layout.GridLayoutFactory
<span class="java&#45;keyword">import</span> org.eclipse.jface.viewers.ArrayContentProvider
<span class="java&#45;keyword">import</span> org.eclipse.jface.viewers.LabelProvider
<span class="java&#45;keyword">import</span> org.eclipse.jface.viewers.ListViewer
<span class="java&#45;keyword">import</span> org.eclipse.rap.rwt.application.EntryPoint
<span class="java&#45;keyword">import</span> org.eclipse.swt.SWT
<span class="java&#45;keyword">import</span> org.eclipse.swt.events.SelectionAdapter
<span class="java&#45;keyword">import</span> org.eclipse.swt.events.SelectionEvent
<span class="java&#45;keyword">import</span> org.eclipse.swt.widgets.Button
<span class="java&#45;keyword">import</span> org.eclipse.swt.widgets.Composite
<span class="java&#45;keyword">import</span> org.eclipse.swt.widgets.Display
<span class="java&#45;keyword">import</span> org.eclipse.swt.widgets.Label
<span class="java&#45;keyword">import</span> org.eclipse.swt.widgets.Shell<p class="paragraph"/>// <span class="java&#45;quote">"Note the use of the Groovy syntax"</span><p class="paragraph"/>class HelloEntryPointService <span class="java&#45;keyword">implements</span> EntryPoint &#123; // <span class="java&#45;quote">"The service needs to implement EntryPoint"</span><p class="paragraph"/>    def fooService // <span class="java&#45;quote">"Other services will get injected by Grails"</span><p class="paragraph"/>    @Override
    <span class="java&#45;keyword">public</span> <span class="java&#45;object">int</span> createUI() &#123;
        log.info(<span class="java&#45;quote">"Creating RWT UI ..."</span>) // <span class="java&#45;quote">"Implicit logger object"</span><p class="paragraph"/>        Display display = <span class="java&#45;keyword">new</span> Display()
        Shell shell = <span class="java&#45;keyword">new</span> Shell(display)
        shell.setText(<span class="java&#45;quote">"Hello RWT!"</span>)
        GridLayoutFactory.swtDefaults().applyTo(shell)<p class="paragraph"/>        <span class="java&#45;keyword">final</span> Label label = <span class="java&#45;keyword">new</span> Label(shell, SWT.NONE)
        GridDataFactory.swtDefaults().align(SWT.FILL, SWT.CENTER).grab(<span class="java&#45;keyword">true</span>, <span class="java&#45;keyword">false</span>).applyTo(label)<p class="paragraph"/>        // <span class="java&#45;quote">"JFace is available"</span>
        ListViewer viewer = <span class="java&#45;keyword">new</span> ListViewer(shell, SWT.V_SCROLL | SWT.H_SCROLL)
        GridDataFactory.swtDefaults().hint(500, 300).applyTo(viewer.list)
        viewer.contentProvider = ArrayContentProvider.instance
        viewer.labelProvider = <span class="java&#45;keyword">new</span> LabelProvider()
        viewer.input = Foo.list() // <span class="java&#45;quote">"Use domain objects and GORM, no DTOs required!"</span><p class="paragraph"/>        Button button = <span class="java&#45;keyword">new</span> Button(shell, SWT.PUSH)
        GridDataFactory.swtDefaults().align(SWT.BEGINNING, SWT.CENTER).applyTo(button)
        button.text = <span class="java&#45;quote">"Click me!"</span>
        button.addSelectionListener(<span class="java&#45;keyword">new</span> SelectionAdapter() &#123;
            <span class="java&#45;object">Integer</span> num = 0<p class="paragraph"/>            @Override
            <span class="java&#45;keyword">public</span> void widgetSelected(SelectionEvent e) &#123;
                label.text = fooService.serviceMethod(num++) // <span class="java&#45;quote">"Call methods of other services"</span>
            &#125;
        &#125;)<p class="paragraph"/>        // <span class="java&#45;quote">"Open the shell and start the UI event handling queue"</span>
        shell.pack()
        shell.open()<p class="paragraph"/>        <span class="java&#45;keyword">while</span>(!shell.isDisposed()) &#123;
            <span class="java&#45;keyword">if</span>(!display.readAndDispatch()) &#123;
                display.sleep()
            &#125;
        &#125;
        display.dispose()<p class="paragraph"/>        <span class="java&#45;keyword">return</span> 0;
    &#125;
&#125;</pre></div><p class="paragraph"/>According to the Grails conventions, a Spring bean called <code>helloEntryPointService</code> will be registered
automatically on application start. The next step is to configure our newly created entry point.<p class="paragraph"/><blockquote class="note">
The given code snippet is just a very simple example to demonstrate the usage. You should develop
your application using a cleaner separation of concerns, i.e. by employing the MVC or MVP pattern.
</blockquote>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/introduction.html">&lt;&lt; <strong>1</strong><span>Introduction</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/configuration.html"><strong>3</strong><span>Configuration</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
